<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-element-behavior/simpla-element-behavior.html"> <dom-module id="simpla-markdown"> <template> <style>:host{display:block;position:relative}.content[data-editing]{opacity:0;transition:opacity 150ms ease}.content__shade{position:absolute;top:0;right:0;bottom:0;left:0;background:var(--simpla-light-black);border-radius:var(--simpla-border-radius);cursor:pointer;z-index:1;opacity:0;transition:opacity .2s ease}.content__shade:hover{opacity:1}.content__placeholder{display:inline-block;padding:.3em;opacity:.45}.content:hover .content__placeholder{opacity:.65}[hidden]{display:none!important}</style> <simpla-markdown-editor html="{{value}}" active="{{active}}"> </simpla-markdown-editor> <div class="content" data-editing$="[[active]]"> <template is="dom-if" if="[[editable]]"> <div class="content__shade" hidden$="[[active]]" on-tap="_goActive"> </div> <span class="content__placeholder" hidden$="[[_hasContent(value)]]"> [[placeholder]] </span> </template> <slot></slot> </div> </template> <script>!function(){"use strict";var t={type:"Article",dataProperties:["value"],getCallback:"_loadFromSimpla",setCallback:"_dataForSimpla"};Polymer({is:"simpla-markdown",properties:{value:{type:String,value:""},editable:{type:Boolean,reflectToAttribute:!0,notify:!0},active:{type:Boolean,value:!1,notify:!0},placeholder:{type:String,value:"Tap to start writing..."}},observers:["_render(value, active)","_importEditor(editable)","_ensureInactiveWhenNotEditable(editable)"],behaviors:[SimplaBehaviors.Element(t)],_importEditor:function(t){this.importHref(this.resolveUrl("simpla-markdown-editor.html"))},_render:function(t,e){e||(Polymer.dom(this).innerHTML=t,this.fire("render"))},_ensureInactiveWhenNotEditable:function(t){t||(this.active=!1)},_goActive:function(){this.active=!0},_hasContent:function(t){return!!t.trim()},_loadFromSimpla:function(t){t&&t.data&&(this.value=t.data.html)},_dataForSimpla:function(){return{html:this.value}}})}()</script> </dom-module> 